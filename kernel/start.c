#include <n7OS/cpu.h>
#include <inttypes.h>
#include <n7OS/processor_structs.h>
#include <n7OS/console.h>
#include <n7OS/irq.h>

extern void handler_50();
extern void handler_timer();

void kernel_start(void)
{
    // Initialisation des interruptions
    init_irq_entry(50, (uint32_t)handler_50);
    init_irq_entry(32, (uint32_t)handler_timer);
    sti();
    // on ne doit jamais sortir de kernel_start
    while (1)
    {
        console_clear();
        console_putbytes("Bienvenue dans n7OS \n>", 22);

        // __asm__("int $50" ::); test de l'interruption 50 (OK)

        // cette fonction arrete le processeur
        hlt();
    }
}
